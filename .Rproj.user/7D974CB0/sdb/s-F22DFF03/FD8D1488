{
    "collab_server" : "",
    "contents" : "\n\n\ntrain <- read.csv(\"data/train.csv\", stringsAsFactors = FALSE)\ntest <- read.csv(\"data/test.csv\", stringsAsFactors = FALSE)\n\ntrain$User_ID <- as.factor(train$User_ID)\ntest$User_ID <- as.factor(test$User_ID)\n\ntrain$Product_ID <- as.factor(train$Product_ID)\ntest$Product_ID <- as.factor(test$Product_ID)\n\ntrain$Gender <- as.factor(train$Gender)\ntest$Gender <- as.factor(test$Gender)\n\ntrain$City_category <- as.factor(train$City_category)\ntest$City_category <- as.factor(test$City_category)\n\ntrain$Marital_Status <- as.factor(train$Marital_Status)\ntest$Marital_Status <- as.factor(test$Marital_Status)\n\n\n\ntrain$source <- \"train\"\ntest$source <- \"test\"\ntest$Purchase <- 0\n\ndf <- rbind(train, test)\n\nsummary(df)\n\n\nsummarize(countt = n_distinct(User_ID)) %>%\n  arrange(desc(countt)) %>%\n\n  df %>% group_by(User_ID) %>%\n  summarize(tot = n(), gend = first(Gender)) %>%\n  arrange(desc(tot)) %>%\n  head(20) %>%\n  ggplot(aes(User_ID, tot, fill = gend)) + geom_bar(stat = \"identity\") +\n  labs(x = \"USER\", y = \"Total number of purchases\", fill = \"Gender\") + \n  ggtitle(\"Number of purchases by each user showing their gender\") +\n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1))\n\n\n\n# purchase count by gender\ndf %>% ggplot(aes(Gender)) + geom_bar()\n\n# purchase amount by gender\np1 <- df %>% filter(source == \"train\") %>%\n  group_by(Gender) %>%\n  summarize(totalPurchases = sum(as.numeric(Purchase), na.rm = TRUE),\n            count = n()) %>%\n  ggplot() + geom_bar(aes(Gender, totalPurchases), stat = \"identity\")\n\np2 <- df %>% filter(source == \"train\") %>%\n  group_by(Gender) %>%\n  summarize(meanPurchases = mean(as.numeric(Purchase), na.rm = TRUE),\n            count = n()) %>%\n  ggplot() + geom_bar(aes(Gender, meanPurchases), stat = \"identity\")\n\n\ngrid.arrange(p1, p2, widths = c(0.5, 0.8))\n\nn_distinct(df$User_ID)\n\n# Purchases by occupation\ndf %>% filter(source == \"train\") %>%\n  group_by(User_ID) %>%\n  summarize(Occ = first(Occupation), sumOcc = sum(Purchase), count = n()) %>%\n  group_by(Occ) %>%\n  summarize(summ = sum(sumOcc)) %>%\n  arrange(desc(summ))\n\n\n# Purchases made per occupation per gender\ndf %>% filter(source == \"train\") %>%\n  group_by(User_ID) %>%\n  summarize(Occ = first(Occupation), sumOcc = sum(Purchase), count = n(), Gen = first(Gender)) %>%\n  ggplot(aes(Occ,sumOcc, fill = Gen)) + geom_bar(stat = \"identity\") +\n  labs(x = \"Occupation\", y = \"Amount Spent on Purchases\", title = \"Amount spent per Occupation\")\n\n# Ratio of males to females in Occupation 9\ndf %>% filter(Occupation == 9) %>%\n  group_by(Gender) %>%\n  summarize(n = n())\n\n# Gender ration for all occupations\ndf %>% group_by(Occupation, Gender) %>%\n  summarize(n = n()) %>%\n  mutate(freq = round(n / sum(n), 2)) %>%\n  ggplot(aes(Occupation, freq, fill = Gender)) + geom_bar(stat = \"identity\")\n\n\ndf %>% filter(source == \"train\") %>%\n  group_by(Occupation, Gender) %>%\n  summarize(sumOcc = sum(Purchase), count = n())\n",
    "created" : 1509452307888.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1078420084",
    "id" : "FD8D1488",
    "lastKnownWriteTime" : 1509557018,
    "last_content_update" : 1509557018657,
    "path" : "C:/Users/AyodejiAkiwowo/Source/Repos/retail/retail.R",
    "project_path" : "retail.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}